<!DOCTYPE html>
<html lang="ar" dir="rtl" id="htmlRoot">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GQ3T6MFMZM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      
      gtag('config', 'G-GQ3T6MFMZM', {
        send_page_view: true
      });
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اصنع شهادة تقدير لطفلك الصائم</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">
                <img src="logo.png" alt="Logo">
            </div>
            <div class="language-toggle">
            </div>
        </nav>
    </header>

    <main>
        <!-- Hero section removed as requested -->
        
        <section id="generator" class="generator-section">
            <div class="container">
                <div class="form-container">
                    <div class="title-decoration">
                        <h2>كافئ أطفالك على صيامهم وجهودهم في رمضان، وامنحهم شهادة تقديراً لصيامهم الشهر الكريم</h2>
                    </div>
                    <form id="certificateForm">
                        <div class="form-group">
                            <label for="fullName">اسم طفلك</label>
                            <input type="text" id="fullName" name="fullName" 
                                   placeholder="أدخل اسم طفلك" 
                                   dir="rtl" 
                                   maxlength="13"
                                   required>
                        </div>

                        <div class="form-group">
                            <label for="signature">التوقيع</label>
                            <input type="text" id="signature" name="signature" 
                                   placeholder="أدخل توقيعك" 
                                   dir="rtl" 
                                   maxlength="13"
                                   required>
                        </div>

                        <div class="form-group gender-section">
                            <div class="gender-inputs">
                                <label>الجنس</label>
                                <div class="radio-group">
                                    <input type="radio" id="male" name="gender" value="male" required>
                                    <label for="male">ذكر</label>
                                    <input type="radio" id="female" name="gender" value="female">
                                    <label for="female">أنثى</label>
                                </div>
                            </div>
                            <div class="template-preview">
                                <img src="cert1.png" alt="Certificate Template" class="preview-image">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>الصورة الشخصية</label>
                            <div class="checkbox-group">
                                <input type="checkbox" id="includePicture" name="includePicture">
                                <label for="includePicture">إضافة صورة شخصية</label>
                            </div>
                            <input type="file" id="pictureInput" accept="image/*" style="display: none;">
                        </div>

                        <button type="submit">إنشاء الشهادة</button>
                    </form>
                </div>

                <div id="certificatePreview" class="hidden">
                    <h2>معاينة الشهادة</h2>
                    <div id="certificateContainer"></div>
                    <button id="downloadCertificate">تحميل الشهادة</button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <!-- Footer content -->
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <script src="script.js"></script>
    
    <script>
      // Wait for the DOM to be fully loaded
      document.addEventListener('DOMContentLoaded', function() {
        // Get the button element by its ID
        var downloadBtn = document.getElementById('downloadCertificate');
        
        // Check if the button exists
        if(downloadBtn) {
          // Attach a click event listener
          downloadBtn.addEventListener('click', function() {
            // Log the click event in the console (for testing)
            console.log('Download Certificate button clicked');
    
            // Send the event to Google Analytics
            gtag('event', 'click', {
              'event_category': 'Button',
              'event_label': 'Certs',
              'value': 1
            });
          });
        }
      });
    </script>
    
    <!-- Add a helper message for Facebook users -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Check if user is likely coming from Facebook 
        if (navigator.userAgent.indexOf('FBAN') !== -1 || 
            navigator.userAgent.indexOf('FBAV') !== -1 || 
            navigator.userAgent.indexOf('Instagram') !== -1) {
          // Add a small notice at the top of the page
          var notice = document.createElement('div');
          notice.className = 'facebook-browser-notice';
          notice.innerHTML = '<strong>تنبيه:</strong> أنت تستخدم متصفح فيسبوك الداخلي. للحصول على تجربة أفضل في تنزيل وحفظ الشهادة، استخدم زر "فتح في المتصفح الخارجي" بعد إنشاء الشهادة.';
          
          // Insert at the top of the main content
          var main = document.querySelector('main');
          if (main && main.firstChild) {
            main.insertBefore(notice, main.firstChild);
          }
          
          // Also add a reminder near the certificate preview
          var certificatePreview = document.getElementById('certificatePreview');
          if (certificatePreview) {
            certificatePreview.addEventListener('DOMNodeInserted', function() {
              // Check if we already added the reminder
              if (!document.getElementById('fb-preview-reminder')) {
                var reminder = document.createElement('div');
                reminder.id = 'fb-preview-reminder';
                reminder.className = 'facebook-browser-notice';
                reminder.style.marginTop = '15px';
                reminder.innerHTML = 'للحصول على أفضل تجربة، استخدم زر "فتح في المتصفح الخارجي (موصى به)" أدناه';
                
                // Add after the certificate container
                var container = document.getElementById('certificateContainer');
                if (container && container.parentNode) {
                  container.parentNode.insertBefore(reminder, container.nextSibling);
                }
              }
            }, { once: true });
          }
        }
      });
    </script>
</body>
</html>
